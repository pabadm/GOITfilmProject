{"version":3,"sources":["webpack:///./templates/promo.hbs","webpack:///./scripts/apiCreator.js","webpack:///./scripts/showPromo.js","webpack:///./scripts/preloader.js","webpack:///./scripts/loadMore.js","webpack:///./scripts/filmSearcher.js","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","apiCreator","search","page","query","popular","image","link","w500","movie","id","apiData","showPromo","api","fetch","then","response","json","results","forEach","film","filmData","filmImgLink","poster_path","filmVote","vote_average","filmTitle","title","console","log","refs","films_block","insertAdjacentHTML","promo","film_promo","document","querySelectorAll","catch","err","preloader","event","undefined","preventdefault","loadMoreReset","loadMoreFunc","total_results","removeChild","apiFunc","load_more_btn","style","display","func","filmSearcher","film_search_form","firstElementChild","value","querySelector","home_btn","addEventListener","total_pages"],"mappings":"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","file":"main.359160909185eb2910f9.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"film_promo\\\">\\n    <button class=\\\"promo_btn\\\">\\n        <img class=\\\"film_poster\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"filmImgLink\") || (depth0 != null ? lookupProperty(depth0,\"filmImgLink\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"filmImgLink\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":38},\"end\":{\"line\":3,\"column\":53}}}) : helper)))\n    + \"\\\" alt=\\\"No poster for this film\\\">\\n        <p class=\\\"film_vote\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"filmVote\") || (depth0 != null ? lookupProperty(depth0,\"filmVote\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"filmVote\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":29},\"end\":{\"line\":4,\"column\":41}}}) : helper)))\n    + \"</p>\\n        <p class=\\\"film_title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"filmTitle\") || (depth0 != null ? lookupProperty(depth0,\"filmTitle\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"filmTitle\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":30},\"end\":{\"line\":5,\"column\":43}}}) : helper)))\n    + \"</p>\\n    </button>\\n</div>\\n\";\n},\"useData\":true});","'use strict';\n\n\n\n// let createdApi = '';\n\n\n//создаватель api(объект с функциями)(каждая возвращает ссылку на api)\nconst apiCreator = {\n  search: (page, query) => {\n    return `https://api.themoviedb.org/3/search/movie?api_key=4aa539255aa0c2506cf45806a15a8a0a&language=en-US&page=${page}&include_adult=false&query=${query}`;\n  },\n  popular: (page) => {\n    return `https://api.themoviedb.org/3/movie/popular?api_key=4aa539255aa0c2506cf45806a15a8a0a&language=en-US&page=${page}`;\n  },\n  image: function (link, w500 = false) {\n    if (w500 === true) {\n      return `https://image.tmdb.org/t/p/w500${link}`;\n    }\n    return `https://image.tmdb.org/t/p/original/${link}`\n  },\n  movie: (id) => {\n    return `https://api.themoviedb.org/3/movie/${id}?api_key=e9f6322f77334e3f0406d6b8eabd79ce`;\n    \n  },\n}\n//создаватель api\n\nexport default apiCreator;\n","'use strict';\n//отрисовка всех элементов\n\nlet apiData = {}; //объект со всеми данными по api(изменяется через showPromo())\n\n\n//промо фильма(вывод блока фильма)\nimport promo from '../templates/promo.hbs';\nimport refs from '../index.js';\nimport apiCreator from './apiCreator.js';\n\nconst showPromo = (api) => {\n  fetch(api)\n    .then(response => response.json())\n    .then(data => {\n      apiData = data;\n      return data.results;\n    })\n    .then(results => {\n      results.forEach(film => {\n        //вставка тегов с фильмами\n        const filmData = {\n          filmImgLink: apiCreator.image(film.poster_path,true),\n          filmVote: film.vote_average,\n          filmTitle: film.title\n        };\n        console.log('filmImgLink :', filmData.filmImgLink);\n        refs.films_block.insertAdjacentHTML('beforeend', promo(filmData));\n        refs.film_promo = document.querySelectorAll('.film_promo');\n      })\n    }).catch(err => console.log('err ' + err));\n}\n//промо фильма\n\nexport {apiData,showPromo};\n","'use strict';\nimport refs from '../index.js';\nimport {showPromo, apiData} from './showPromo.js';\nimport {loadMore, page, loadMoreReset, loadMoreFunc} from './loadMore.js';\nimport apiCreator from './apiCreator.js';\nconsole.log('refs :', refs);\n\nconst preloader = (event) => {\n  if (event !== undefined) {\n    event.preventdefault;\n    loadMoreReset();\n    loadMoreFunc(preloader);\n    if (apiData.total_results !== 0 && !apiData.hasOwnProperty('errors') && page === 1) {\n      refs.film_promo.forEach(promo => {\n        refs.films_block.removeChild(promo);\n      });\n    }\n  }\n  showPromo(apiCreator.popular(page));\n}\nexport default preloader;\n","'use strict';\nimport refs from '../index.js';\nimport apiCreator from './apiCreator.js';\nimport filmSearcher from './filmSearcher.js';\nimport preloader from './preloader.js';\nimport {\n  apiData\n} from './showPromo.js';\n\nlet page = 1;\nlet apiFunc = preloader;// переменная функции, которая сюда передается(preloader по умолчанию т.к. она выполняется первой)\n\nconst loadMore = () => {\n  page += 1;\n  if (page >= apiData.total_pages || apiData.hasOwnProperty('errors')) {\n    refs.load_more_btn.style.display = 'none';\n  }\n  apiFunc();\n  return page;\n}\n\n\n\nconst loadMoreReset = () => {\n  page = 1;\n  refs.load_more_btn.style.display = 'block';\n}\n\n//функция, которая возвращает, какую функцию использовать для кнопки (loadMore)\nconst loadMoreFunc = (func) => {\n  apiFunc = func;\n\n}\n//\n\n\n\nexport {\n  loadMoreFunc,\n  loadMore,\n  page,\n  loadMoreReset\n};\n","'use strict';\nimport {\n  loadMoreFunc,\n  page,\n  loadMoreReset,\n  loadMore\n} from './loadMore.js';\nimport refs from '../index.js';\nimport {\n  showPromo,\n  apiData\n} from './showPromo.js';\nimport apiCreator from './apiCreator.js';\nimport preloader from './preloader.js';\n\n\n\nconst filmSearcher = (event) => {\n  console.log('event :', event);\n  if (event !== undefined) {\n    event.preventdefault;\n    loadMoreReset();\n    loadMoreFunc(filmSearcher);\n  }\n  //значение поиска\n  let query = refs.film_search_form.firstElementChild.value;\n\n  //проверка на то, есть ли теги с фильмами в dom\n  if (apiData.total_results !== 0 && !apiData.hasOwnProperty('errors') && page === 1) {\n    refs.film_promo.forEach(promo => {\n      refs.films_block.removeChild(promo);\n    });\n  }\n  //\n  showPromo(apiCreator.search(page, query));\n}\n\nexport default filmSearcher;\n","'use strict';\nimport './styles.css';\n//через прочерк я отмечаю теги\nconst refs = {\n  films_block: document.querySelector('#films_block'),\n  film_search_form: document.querySelector('#film_search_form'),\n  home_btn: document.querySelector('#home_btn'),\n  // film_promo('.film_promo'), (добавляется через showPromo)\n  load_more_btn: document.querySelector('#load_more')\n};\n\n\nimport filmSearcher from './scripts/filmSearcher.js';\nimport preloader from './scripts/preloader.js';\n\n\nimport {loadMore} from './scripts/loadMore.js';\n\nrefs.load_more_btn.addEventListener('click', loadMore);\n\n//начальный запуск показа фильмов\npreloader();\n//\n\n//ивент для формы\nrefs.film_search_form.addEventListener('submit', filmSearcher);\n//\n\n\n\n//ивент для кнопки load more\n\n\n//ивент для кнопки home\nrefs.home_btn.addEventListener('click', preloader);\n\n//экспорты\nexport default refs;"],"sourceRoot":""}